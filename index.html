<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farming Game Prototype</title>
<style>
  body { margin: 0; overflow: hidden; background: #000; }

  #hud {
    position: absolute; top: 10px; left: 10px;
    color: white; font-family: sans-serif; font-size: 16px;
    background: rgba(0,0,0,0.4); padding: 6px 10px; border-radius: 4px;
    z-index: 10;
  }

  #crosshair {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 10px;
    height: 10px;
    margin-left: -5px;
    margin-top: -5px;
    border-radius: 50%;
    border: 2px solid white;
    pointer-events: none;
    z-index: 9;
    box-sizing: border-box;
  }

  #message {
    position: fixed;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-family: sans-serif;
    font-size: 14px;
    background: rgba(0,0,0,0.6);
    padding: 4px 12px;
    border-radius: 4px;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
    z-index: 10;
  }

  #inventory-panel {
    position: fixed;
    right: 20px;
    top: 20px;
    min-width: 160px;
    color: white;
    font-family: sans-serif;
    font-size: 14px;
    background: rgba(0,0,0,0.7);
    padding: 8px 12px;
    border-radius: 4px;
    display: none;
    white-space: pre-line;
    z-index: 11;
  }

  /* Hotbar at bottom center */
  #hotbar {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 6px;
    z-index: 15;
    font-family: sans-serif;
  }

  .hotbar-item {
    padding: 4px 8px;
    font-size: 13px;
    border-radius: 4px;
    background: rgba(0,0,0,0.6);
    color: white;
    border: 1px solid rgba(255,255,255,0.3);
    opacity: 0.8;
  }

  .hotbar-item.selected {
    border-color: white;
    opacity: 1;
    background: rgba(0,0,0,0.9);
  }

  /* Market panel (popup) */
  #market-panel {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    min-width: 280px;
    color: white;
    font-family: sans-serif;
    font-size: 14px;
    background: rgba(0,0,0,0.9);
    padding: 10px 14px;
    border-radius: 4px;
    display: none;
    z-index: 20;
  }

  #market-panel h2 {
    margin: 0 0 6px 0;
    font-size: 16px;
  }

  #market-panel button {
    margin: 2px 4px 0 0;
    padding: 4px 8px;
    font-size: 13px;
    cursor: pointer;
  }

  #market-info {
    margin-top: 6px;
    white-space: pre-line;
  }

  #market-status {
    margin-top: 6px;
    font-size: 13px;
    opacity: 0.9;
  }

  .market-row {
    margin-top: 6px;
    margin-bottom: 2px;
  }

  #market-crop-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin: 8px 0;
  }

  .market-nav-btn {
    padding: 4px 8px;
    font-size: 16px;
    cursor: pointer;
  }

  #market-crop-title {
    font-size: 18px;
    font-weight: bold;
  }

  #market-crop-counter {
    text-align: center;
    font-size: 12px;
    opacity: 0.8;
  }

  #market-actions {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 8px;
  }

  #controls-panel {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    min-width: 300px;
    color: white;
    font-family: sans-serif;
    font-size: 14px;
    background: rgba(0,0,0,0.9);
    padding: 12px 16px 16px;
    border-radius: 6px;
    display: none;
    z-index: 30;
  }

  #controls-panel h2 {
    margin: 0 0 8px 0;
    font-size: 17px;
  }

  #controls-panel ul {
    list-style: none;
    padding: 0;
    margin: 0 0 8px 0;
    line-height: 1.4;
  }

  #controls-panel .close-controls {
    position: absolute;
    top: 6px;
    right: 8px;
    background: transparent;
    border: none;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
  }

  #math-panel {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 340px;
    color: white;
    font-family: sans-serif;
    font-size: 14px;
    background: rgba(0,0,0,0.95);
    padding: 16px 20px 20px;
    border-radius: 8px;
    display: none;
    z-index: 40;
  }

  #math-panel h2 {
    margin: 0 0 10px 0;
    font-size: 18px;
  }

  #math-panel .math-question {
    margin-bottom: 10px;
    line-height: 1.4;
  }

  #math-panel .math-options button {
    width: 100%;
    margin-bottom: 8px;
    padding: 6px 10px;
    font-size: 14px;
    border: 1px solid rgba(255,255,255,0.2);
    background: rgba(255,255,255,0.08);
    color: white;
    border-radius: 4px;
    cursor: pointer;
    text-align: left;
  }

  #math-panel .math-options button:hover {
    background: rgba(255,255,255,0.15);
  }

  #math-panel .math-feedback {
    min-height: 18px;
    margin-top: 4px;
    font-size: 13px;
  }

  #math-panel .close-math-btn {
    position: absolute;
    top: 6px;
    right: 8px;
    background: transparent;
    border: none;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
  }

  #math-panel .math-save-btn {
    width: 100%;
    margin-top: 10px;
    padding: 6px 10px;
    font-size: 14px;
    border: 1px solid rgba(255,255,255,0.25);
    background: rgba(255,255,255,0.08);
    color: #fff;
    border-radius: 4px;
    cursor: pointer;
  }

  #math-panel .math-save-btn:hover {
    background: rgba(255,255,255,0.15);
  }

  #math-panel .math-save-feedback {
    min-height: 18px;
    text-align: center;
    margin-top: 6px;
    font-size: 13px;
    color: #9de29d;
  }
</style>

</head>
<body>
  <div id="hud">Day 1 | $0</div>
  <div id="crosshair"></div>
  <div id="message"></div>
  <div id="inventory-panel"></div>

  <div id="hotbar">
    <div id="hotbar-none" class="hotbar-item">[0] Hand</div>
    <div id="hotbar-hoe" class="hotbar-item">[1] Hoe</div>
    <div id="hotbar-shovel" class="hotbar-item">[2] Shovel</div>
    <div id="hotbar-rake" class="hotbar-item">[3] Rake</div>
  </div>

  <div id="market-panel">
    <h2>Market</h2>
    <div id="market-crop-nav">
      <button id="market-prev-crop-btn" class="market-nav-btn">&#9664;</button>
      <div id="market-crop-title">-</div>
      <button id="market-next-crop-btn" class="market-nav-btn">&#9654;</button>
    </div>
    <div id="market-crop-counter"></div>
    <div id="market-info"></div>
    <div id="market-actions">
      <button id="market-sell-crop-btn">Sell</button>
      <button id="market-buy-seed-btn">Buy Seed</button>
    </div>

    <button id="market-close-btn">Close</button>
    <button id="market-controls-btn" style="margin-left:8px;">Controls</button>
    <div id="market-status"></div>
    <div style="margin-top:6px;font-size:12px;opacity:0.7;">
      (Click back on the game to move again)
    </div>
  </div>

  <div id="controls-panel">
    <button class="close-controls" id="controls-close-btn">✕</button>
    <h2>Controls</h2>
    <ul>
      <li>WASD - Move</li>
      <li>Mouse - Look / Aim</li>
      <li>Left Click - Interact / Use</li>
      <li>Right Click - Rotate decoration</li>
      <li>0 Key - Cycle seeds/animals/decorations</li>
      <li>1/2/3 - Select tools</li>
      <li>I - Toggle inventory</li>
    </ul>
  </div>

  <div id="math-panel">
    <button class="close-math-btn" id="math-close-btn">✕</button>
    <h2>Math Check</h2>
    <div class="math-question" id="math-question-text">Question goes here</div>
    <div class="math-options" id="math-options-container"></div>
    <div class="math-feedback" id="math-feedback"></div>
    <button class="math-save-btn" id="math-save-btn">Save Progress</button>
    <div class="math-save-feedback" id="math-save-feedback"></div>
  </div>
  <div id="math-lockout-timer" style="display:none;position:fixed;top:10px;right:10px;background:rgba(0,0,0,0.7);color:#fff;padding:6px 10px;border-radius:4px;font-family:sans-serif;font-size:14px;z-index:50;"></div>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.164.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.164.0/examples/jsm/"
    }
  }
  </script>

  <script type="module" src="./src/core/main.js"></script>
</body>
</html>
